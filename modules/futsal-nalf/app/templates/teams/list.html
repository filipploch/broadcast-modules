{% extends "teams/base.html" %}

{% block title %}Lista Zespo≈Ç√≥w{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <h3>{{ stats.total_teams }}</h3>
        <p>Zespo≈Ç√≥w w bazie</p>
    </div>
    {% if stats.pending_teams > 0 %}
    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
        <h3>{{ stats.pending_teams }}</h3>
        <p>Do uzupe≈Çnienia</p>
    </div>
    {% endif %}
</div>

<div class="card">
    <div class="card-header">
        <h2>Wszystkie Zespo≈Çy</h2>
        <div class="actions">
            <a href="{{ url_for('scrape_teams') }}" class="btn btn-success">
                üîç Scrapuj nowe zespo≈Çy
            </a>
            <a href="{{ url_for('create_team') }}" class="btn btn-primary">
                ‚ûï Dodaj rƒôcznie
            </a>
        </div>
    </div>
    
    {% if teams %}
    <table>
        <thead>
            <tr>
                <th>Skr√≥t</th>
                <th>Nazwa</th>
                <th>Nazwa 20</th>
                <th>URL</th>
                <th>Logo</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            {% for team in teams %}
            <tr>
                <td><strong>{{ team.short_name }}</strong></td>
                <td>{{ team.name }}</td>
                <td>{{ team.name_20 }}</td>
                <td>
                    <a href="{{ team.team_url }}" target="_blank" style="color: #3498db; text-decoration: none;">
                        Strona ‚Üí
                    </a>
                </td>
                <td>
                    <img src="{{ url_for('static', filename=team.logo_path.replace('static/', '')) }}"
                         alt="{{ team.name }}"
                         style="height: 30px; max-width: 100px; object-fit: contain;">
                </td>
                <td>
                    <div class="actions">
                        <a href="{{ url_for('view_team', team_id=team.id) }}" class="btn btn-primary btn-small">
                            Widok
                        </a>
                        <a href="{{ url_for('edit_team', team_id=team.id) }}" class="btn btn-secondary btn-small">
                            Edytuj
                        </a>
                        <form action="{{ url_for('delete_team', team_id=team.id) }}"
                              method="POST" 
                              style="display: inline;"
                              onsubmit="return confirm('Czy na pewno chcesz usunƒÖƒá zesp√≥≈Ç {{ name }}?');">
                            <button type="submit" class="btn btn-danger btn-small">Usu≈Ñ</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; padding: 2rem; color: #7f8c8d;">
        Brak zespo≈Ç√≥w w bazie danych. 
        <a href="{{ url_for('scrape_teams') }}" style="color: #3498db;">Rozpocznij scrapowanie</a>
    </p>
    {% endif %}
</div>
{% endblock %}
