{% extends "base/base.html" %}

{% block title %}Scrapowanie SpotkaÅ„{% endblock %}

{% block content %}
{% if scraping_status.status == 'in_progress' %}
<div class="card" style="background: #fff3cd; border: 2px solid #ffc107;">
    <div class="card-header" style="background: #ffc107; color: #856404;">
        <h2>â³ Scrapowanie W Toku</h2>
    </div>
    <p style="padding: 1rem;">
        Scraper dziaÅ‚a w tle. 
        <a href="{{ url_for('games_scrape_status') }}" class="btn btn-primary">Zobacz Status â†’</a>
    </p>
</div>
{% endif %}

<div class="card">
    <div class="card-header">
        <h2>Scrapuj ZespoÅ‚y z NALF</h2>
    </div>
    
    <form method="POST">
        <div class="form-group">
            <label for="league_urls">
                URL Tabel Ligowych
                <small>Podaj jeden lub wiÄ™cej URL (kaÅ¼dy w nowej linii lub oddzielone przecinkami)</small>
            </label>
            <textarea 
                id="league_urls" 
                name="league_urls" 
                rows="8" 
                required
                placeholder="https://nalffutsal.pl/?page_id=16&#10;https://nalffutsal.pl/?page_id=36">{% for url in default_urls %}{{ url }}
{% endfor %}</textarea>
            <small>
                ğŸ’¡ DomyÅ›lne URL-e to strony tabel ligowych NALF. MoÅ¼esz dodaÄ‡ wiÄ™cej lub je zmodyfikowaÄ‡.
            </small>
        </div>
        
        <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
            <strong>â„¹ï¸ Jak to dziaÅ‚a (âš¡ Scraper w tle):</strong>
            <ol style="margin-top: 0.5rem; margin-left: 1.5rem;">
                <li>System uruchomi scraper w osobnym wÄ…tku (nie blokuje przeglÄ…darki)</li>
                <li><strong>Auto-update:</strong> ZespoÅ‚y juÅ¼ istniejÄ…ce majÄ… nazwy automatycznie aktualizowane</li>
                <li>Nowe zespoÅ‚y bÄ™dÄ… wymagaÅ‚y uzupeÅ‚nienia danych</li>
                <li>MoÅ¼esz zamknÄ…Ä‡ przeglÄ…darkÄ™ - scraper dziaÅ‚a w tle na serwerze</li>
                <li>Status scrapowania moÅ¼esz sprawdziÄ‡ na dedykowanej stronie</li>
            </ol>
        </div>
        
        <div class="actions">
            <button type="submit" class="btn btn-success">ğŸ” Rozpocznij Scrapowanie</button>
            <a href="{{ url_for('league_games', league_id=league.id) }}" class="btn btn-secondary">Anuluj</a>
        </div>
    </form>
</div>

<div class="card">
    <div class="card-header">
        <h2>PrzykÅ‚adowe Strony NALF</h2>
    </div>
    
    <table>
        <thead>
            <tr>
                <th>Liga</th>
                <th>URL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Ekstraklasa</td>
                <td><a href="https://nalffutsal.pl/?page_id=16" target="_blank">https://nalffutsal.pl/?page_id=16</a></td>
            </tr>
            <tr>
                <td>I Liga</td>
                <td><a href="https://nalffutsal.pl/?page_id=36" target="_blank">https://nalffutsal.pl/?page_id=36</a></td>
            </tr>
            <tr>
                <td colspan="2" style="font-style: italic; color: #7f8c8d;">
                    ğŸ’¡ MoÅ¼esz dodaÄ‡ dowolnÄ… stronÄ™ z tabelÄ… ligowÄ… NALF uÅ¼ywajÄ…c tego samego formatu
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}
